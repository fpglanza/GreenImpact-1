{"ast":null,"code":"var startUserTimer = function startUserTimer() {\n  var winpointsBTN = document.getElementById('increaseWinpointsBTN'); //get winpoints BTN\n\n  winpointsBTN.addEventListener(\"click\", function () {\n    //check for button click\n    localStorage.setItem(\"endTime\", new Date().getTime() + 3600000); //Save endTime(currentTime + 1 hour) to local storage\n\n    localStorage.setItem(\"timerRunning\", true); //Save timerRunning to localStorage\n\n    winpointsBTN.remove(); //Removes Button from document\n  });\n};\n\nvar timer = setInterval(function () {\n  //Create a timer function that runs every second\n  if (localStorage.getItem(\"timerRunning\")) {\n    //Check if timer is running\n    var timer_clock = document.getElementById('timer_clock'); //Get HTML element\n\n    var now = new Date().getTime(); //Get current time\n\n    var delta = parseInt(localStorage.getItem(\"endTime\")) - now; // milliseconds elapsed since start\n\n    var minutes = Math.floor(delta % (1000 * 60 * 60) / (1000 * 60)); //Get minutes left\n\n    var seconds = Math.floor(delta % (1000 * 60) / 1000); //Get seconds left\n\n    timer_clock.innerHTML = \"Time until respawn: \".concat(minutes, \":\").concat(seconds); //Display time left in view\n\n    if (delta <= 0) {\n      //Check if timer has stopped\n      stopUserTimer();\n    }\n  }\n}, 1000);\n\nvar stopUserTimer = function stopUserTimer() {\n  var winpointsBTNDiv = document.querySelector(\".winpoints-btn\");\n  var timer_clock = document.getElementById('timer_clock');\n  localStorage.removeItem(\"endTime\"); //Remove time from localStorage\n\n  localStorage.removeItem(\"timerRunning\"); //Remove timerRunning from localStorage\n\n  clearInterval(timer); //Stop the interval function timer\n\n  timer_clock.innerHTML = \"\"; //Hide the timer clock\n\n  winpointsBTNDiv.insertAdjacentHTML(\"beforeend\", '<%=link_to user_add_points_path(current_user), class: \"btn-floating btn-large waves-effect waves-light red\", id: \"increaseWinpointsBTN\" do%><svg width=\"25px\" height=\"25px\" viewBox=\"0 0 16 16\" class=\"bi bi-x\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">');\n  winpointsBTNDiv.insertAdjacentHTML(\"beforeend\", '<path fill-rule=\"evenodd\" d=\"M11.854 4.146a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708-.708l7-7a.5.5 0 0 1 .708 0z\"/>');\n  winpointsBTNDiv.insertAdjacentHTML(\"beforeend\", '<path fill-rule=\"evenodd\" d=\"M4.146 4.146a.5.5 0 0 0 0 .708l7 7a.5.5 0 0 0 .708-.708l-7-7a.5.5 0 0 0-.708 0z\"/>');\n  winpointsBTNDiv.insertAdjacentHTML(\"beforeend\", '</svg> Add Points <%end%>');\n};\n\nexport { startUserTimer };","map":{"version":3,"sources":["/Users/cornelius/Code/GreenImpact-1/app/javascript/components/user_timer.js"],"names":["startUserTimer","winpointsBTN","document","getElementById","addEventListener","localStorage","setItem","Date","getTime","remove","timer","setInterval","getItem","timer_clock","now","delta","parseInt","minutes","Math","floor","seconds","innerHTML","stopUserTimer","winpointsBTNDiv","querySelector","removeItem","clearInterval","insertAdjacentHTML"],"mappings":"AAAA,IAAMA,cAAc,GAAG,SAAjBA,cAAiB,GAAM;AAC3B,MAAMC,YAAY,GAAGC,QAAQ,CAACC,cAAT,CAAwB,sBAAxB,CAArB,CAD2B,CAC2C;;AACtEF,EAAAA,YAAY,CAACG,gBAAb,CAA8B,OAA9B,EAAuC,YAAM;AAAE;AAC7CC,IAAAA,YAAY,CAACC,OAAb,CAAqB,SAArB,EAAiC,IAAIC,IAAJ,GAAWC,OAAX,KAAuB,OAAxD,EAD2C,CACwB;;AACnEH,IAAAA,YAAY,CAACC,OAAb,CAAqB,cAArB,EAAqC,IAArC,EAF2C,CAEC;;AAC5CL,IAAAA,YAAY,CAACQ,MAAb,GAH2C,CAGpB;AACxB,GAJD;AAKD,CAPD;;AASC,IAAIC,KAAK,GAAGC,WAAW,CAAC,YAAW;AAAE;AACpC,MAAIN,YAAY,CAACO,OAAb,CAAqB,cAArB,CAAJ,EAA0C;AAAE;AAC1C,QAAMC,WAAW,GAAGX,QAAQ,CAACC,cAAT,CAAwB,aAAxB,CAApB,CADwC,CACoB;;AAC5D,QAAIW,GAAG,GAAG,IAAIP,IAAJ,GAAWC,OAAX,EAAV,CAFwC,CAER;;AAChC,QAAIO,KAAK,GAAGC,QAAQ,CAACX,YAAY,CAACO,OAAb,CAAqB,SAArB,CAAD,CAAR,GAA4CE,GAAxD,CAHwC,CAGqB;;AAC7D,QAAIG,OAAO,GAAGC,IAAI,CAACC,KAAL,CAAYJ,KAAK,IAAI,OAAO,EAAP,GAAY,EAAhB,CAAN,IAA8B,OAAO,EAArC,CAAX,CAAd,CAJwC,CAI4B;;AACpE,QAAIK,OAAO,GAAGF,IAAI,CAACC,KAAL,CAAYJ,KAAK,IAAI,OAAO,EAAX,CAAN,GAAwB,IAAnC,CAAd,CALwC,CAKgB;;AACxDF,IAAAA,WAAW,CAACQ,SAAZ,iCAA+CJ,OAA/C,cAA0DG,OAA1D,EANwC,CAM6B;;AACrE,QAAIL,KAAK,IAAI,CAAb,EAAgB;AAAE;AAChBO,MAAAA,aAAa;AACd;AACF;AACD,CAZsB,EAYpB,IAZoB,CAAvB;;AAcD,IAAMA,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AAC1B,MAAMC,eAAe,GAAGrB,QAAQ,CAACsB,aAAT,CAAuB,gBAAvB,CAAxB;AACA,MAAMX,WAAW,GAAGX,QAAQ,CAACC,cAAT,CAAwB,aAAxB,CAApB;AACAE,EAAAA,YAAY,CAACoB,UAAb,CAAwB,SAAxB,EAH0B,CAGU;;AACpCpB,EAAAA,YAAY,CAACoB,UAAb,CAAwB,cAAxB,EAJ0B,CAIe;;AACzCC,EAAAA,aAAa,CAAChB,KAAD,CAAb,CAL0B,CAKJ;;AACtBG,EAAAA,WAAW,CAACQ,SAAZ,GAAwB,EAAxB,CAN0B,CAME;;AAC5BE,EAAAA,eAAe,CAACI,kBAAhB,CAAmC,WAAnC,EAAgD,yQAAhD;AACAJ,EAAAA,eAAe,CAACI,kBAAhB,CAAmC,WAAnC,EAAgD,kHAAhD;AACAJ,EAAAA,eAAe,CAACI,kBAAhB,CAAmC,WAAnC,EAAgD,iHAAhD;AACAJ,EAAAA,eAAe,CAACI,kBAAhB,CAAmC,WAAnC,EAAgD,2BAAhD;AACD,CAXD;;AAYA,SAAS3B,cAAT","sourcesContent":["const startUserTimer = () => {\n  const winpointsBTN = document.getElementById('increaseWinpointsBTN'); //get winpoints BTN\n  winpointsBTN.addEventListener(\"click\", () => { //check for button click\n    localStorage.setItem(\"endTime\", (new Date().getTime() + 3600000)); //Save endTime(currentTime + 1 hour) to local storage\n    localStorage.setItem(\"timerRunning\", true); //Save timerRunning to localStorage\n    winpointsBTN.remove(); //Removes Button from document\n  });\n};\n\n var timer = setInterval(function() { //Create a timer function that runs every second\n  if (localStorage.getItem(\"timerRunning\")) { //Check if timer is running\n    const timer_clock = document.getElementById('timer_clock'); //Get HTML element\n    var now = new Date().getTime(); //Get current time\n    var delta = parseInt(localStorage.getItem(\"endTime\")) - now; // milliseconds elapsed since start\n    var minutes = Math.floor((delta % (1000 * 60 * 60)) / (1000 * 60)); //Get minutes left\n    var seconds = Math.floor((delta % (1000 * 60)) / 1000); //Get seconds left\n    timer_clock.innerHTML = `Time until respawn: ${minutes}:${seconds}`; //Display time left in view\n    if (delta <= 0) { //Check if timer has stopped\n      stopUserTimer();\n    }\n  }\n }, 1000);\n\nconst stopUserTimer = () => {\n  const winpointsBTNDiv = document.querySelector(\".winpoints-btn\");\n  const timer_clock = document.getElementById('timer_clock');\n  localStorage.removeItem(\"endTime\"); //Remove time from localStorage\n  localStorage.removeItem(\"timerRunning\"); //Remove timerRunning from localStorage\n  clearInterval(timer); //Stop the interval function timer\n  timer_clock.innerHTML = \"\"; //Hide the timer clock\n  winpointsBTNDiv.insertAdjacentHTML(\"beforeend\", '<%=link_to user_add_points_path(current_user), class: \"btn-floating btn-large waves-effect waves-light red\", id: \"increaseWinpointsBTN\" do%><svg width=\"25px\" height=\"25px\" viewBox=\"0 0 16 16\" class=\"bi bi-x\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">');\n  winpointsBTNDiv.insertAdjacentHTML(\"beforeend\", '<path fill-rule=\"evenodd\" d=\"M11.854 4.146a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708-.708l7-7a.5.5 0 0 1 .708 0z\"/>');\n  winpointsBTNDiv.insertAdjacentHTML(\"beforeend\", '<path fill-rule=\"evenodd\" d=\"M4.146 4.146a.5.5 0 0 0 0 .708l7 7a.5.5 0 0 0 .708-.708l-7-7a.5.5 0 0 0-.708 0z\"/>');\n  winpointsBTNDiv.insertAdjacentHTML(\"beforeend\", '</svg> Add Points <%end%>');\n};\nexport { startUserTimer }"]},"metadata":{},"sourceType":"module"}